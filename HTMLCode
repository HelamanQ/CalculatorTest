<div id="simple-calculator" style="max-width:260px;margin:20px auto;font-family:Arial, sans-serif;">
  <div style="background:#f7f7f7;border:1px solid #ccc;border-radius:8px;padding:12px;box-shadow:0 2px 4px rgba(0,0,0,0.1);">
    <input
      id="calc-display"
      type="text"
      readonly
      style="width:100%;height:40px;margin-bottom:10px;font-size:18px;text-align:right;padding:5px 8px;border:1px solid #bbb;border-radius:4px;box-sizing:border-box;"
    />

    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;">
      <button type="button" onclick="calcClear()" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e57373;cursor:pointer;">C</button>
      <button type="button" onclick="calcBackspace()" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#ffb74d;cursor:pointer;">⌫</button>
      <button type="button" onclick="calcAppend('(')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">(</button>
      <button type="button" onclick="calcAppend(')')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">)</button>

      <button type="button" onclick="calcAppend('7')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">7</button>
      <button type="button" onclick="calcAppend('8')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">8</button>
      <button type="button" onclick="calcAppend('9')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">9</button>
      <button type="button" onclick="calcAppend('/')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">÷</button>

      <button type="button" onclick="calcAppend('4')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">4</button>
      <button type="button" onclick="calcAppend('5')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">5</button>
      <button type="button" onclick="calcAppend('6')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">6</button>
      <button type="button" onclick="calcAppend('*')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">×</button>

      <button type="button" onclick="calcAppend('1')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">1</button>
      <button type="button" onclick="calcAppend('2')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">2</button>
      <button type="button" onclick="calcAppend('3')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">3</button>
      <button type="button" onclick="calcAppend('-')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">−</button>

      <button type="button" onclick="calcAppend('0')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">0</button>
      <button type="button" onclick="calcAppend('.')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#fafafa;cursor:pointer;">.</button>
      <button type="button" onclick="calcCalculate()" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#81c784;cursor:pointer;">=</button>
      <button type="button" onclick="calcAppend('+')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">+</button>

      <!-- New buttons -->
      <button type="button" onclick="calcSquare()" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#64b5f6;cursor:pointer;">x²</button>
      <button type="button" onclick="calcSqrt()" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#64b5f6;cursor:pointer;">√</button>
      <button type="button" onclick="calcAppend('%')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">%</button>
      <button type="button" onclick="calcAppend('**')" style="padding:10px;font-size:16px;border:none;border-radius:4px;background:#e0e0e0;cursor:pointer;">^</button>
    </div>
  </div>
</div>

<script>
  (function () {
    var currentExpression = "";

    window.calcAppend = function (value) {
      currentExpression += value;
      document.getElementById("calc-display").value = currentExpression;
    };

    window.calcClear = function () {
      currentExpression = "";
      document.getElementById("calc-display").value = "";
    };

    window.calcBackspace = function () {
      currentExpression = currentExpression.slice(0, -1);
      document.getElementById("calc-display").value = currentExpression;
    };

    window.calcSquare = function () {
      try {
        var val = parseFloat(document.getElementById("calc-display").value);
        if (isNaN(val)) throw new Error("Invalid");
        var result = val * val;
        document.getElementById("calc-display").value = result;
        currentExpression = String(result);
      } catch (e) {
        document.getElementById("calc-display").value = "Error";
        currentExpression = "";
      }
    };

    window.calcSqrt = function () {
      try {
        var val = parseFloat(document.getElementById("calc-display").value);
        if (isNaN(val) || val < 0) throw new Error("Invalid");
        var result = Math.sqrt(val);
        document.getElementById("calc-display").value = result;
        currentExpression = String(result);
      } catch (e) {
        document.getElementById("calc-display").value = "Error";
        currentExpression = "";
      }
    };

    window.calcCalculate = function () {
      if (!currentExpression) return;
      try {
        if (!/^[0-9+\-*/().\s%]+$/.test(currentExpression)) {
          throw new Error("Invalid input");
        }
        var result = Function('"use strict";return (' + currentExpression + ")")();
        document.getElementById("calc-display").value = result;
        currentExpression = String(result);
      } catch (e) {
        document.getElementById("calc-display").value = "Error";
        currentExpression = "";
      }
    };
  })();
</script>
